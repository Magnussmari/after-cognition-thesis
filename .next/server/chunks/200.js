exports.id=200,exports.ids=[200],exports.modules={5777:(e,t,r)=>{Promise.resolve().then(r.bind(r,5207)),Promise.resolve().then(r.bind(r,5379))},5207:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(326),a=r(7577),i=r(434),n=r(5047),l=r(2001),o=r(4131);function d({chapter:e,currentSection:t,userProgress:r=[]}){let{user:d}=(0,o.a)(),c=(0,n.useRouter)(),x=(0,a.useRef)(null),[h,u]=(0,a.useState)(!0),[m,g]=(0,a.useState)(!1),[b,p]=(0,a.useState)(0),[f,k]=(0,a.useState)(""),y=async()=>{if(d&&t&&f){g(!0);try{await (0,l.Ke)(d.id,t.id,f.substring(0,100),f,window.getSelection()?.anchorNode?.parentElement?.id),window.getSelection()?.removeAllRanges(),k("")}catch(e){console.error("Error creating bookmark:",e)}finally{g(!1)}}},j=t=>{c.push(`/chapters/${e.slug}/${t.slug}`)},w=e=>{let t=r.find(t=>t.section_id===e);return t?.progress_percentage||0};return(0,s.jsxs)("div",{className:"flex",children:[s.jsx("aside",{className:`${h?"w-64":"w-0"} transition-all duration-300 overflow-hidden bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700`,children:(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4",children:"Table of Contents"}),s.jsx("nav",{className:"space-y-1",children:e.sections?.map(e=>{let r=t?.id===e.id,a=w(e.id);return s.jsx("button",{onClick:()=>j(e),className:`w-full text-left px-3 py-2 text-sm rounded-md transition-colors relative ${r?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"truncate pr-2",children:e.title}),a>0&&s.jsx("span",{className:`text-xs ${100===a?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"}`,children:100===a?"âœ“":`${Math.round(a)}%`})]})},e.id)})})]})}),(0,s.jsxs)("main",{className:"flex-1 relative",children:[s.jsx("button",{onClick:()=>u(!h),className:"absolute top-4 left-4 z-10 p-2 rounded-md bg-white dark:bg-gray-800 shadow-md hover:shadow-lg transition-shadow","aria-label":"Toggle sidebar",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),s.jsx("div",{className:"fixed top-16 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-700 z-20",children:s.jsx("div",{className:"h-full bg-blue-600 dark:bg-blue-400 transition-all duration-300",style:{width:`${b}%`}})}),(0,s.jsxs)("article",{ref:x,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("header",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[s.jsx(i.default,{href:"/chapters",className:"hover:text-gray-700 dark:hover:text-gray-300",children:"Chapters"}),s.jsx("span",{children:"/"}),s.jsx("span",{children:e.title})]}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:e.title}),e.description&&s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e.description})]}),t?(0,s.jsxs)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:t.title}),s.jsx("div",{dangerouslySetInnerHTML:{__html:t.content},className:"thesis-content"}),s.jsx("nav",{className:"mt-12 pt-8 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex justify-between",children:e.sections&&(0,s.jsxs)(s.Fragment,{children:[t.order_index>0&&(0,s.jsxs)("button",{onClick:()=>{j(e.sections[t.order_index-1])},className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),t.order_index<e.sections.length-1&&(0,s.jsxs)("button",{onClick:()=>{j(e.sections[t.order_index+1])},className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 ml-auto",children:["Next",s.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Select a section from the table of contents to begin reading."}),e.sections&&e.sections.length>0&&s.jsx("div",{className:"grid gap-4",children:e.sections.map(e=>{let t=w(e.id);return s.jsx("button",{onClick:()=>j(e),className:"text-left p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),e.reading_time_minutes&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.reading_time_minutes," min read"]})]}),t>0&&s.jsx("span",{className:`text-sm ${100===t?"text-green-600 dark:text-green-400":"text-blue-600 dark:text-blue-400"}`,children:100===t?"Completed":`${Math.round(t)}%`})]})},e.id)})})]})]}),f&&d&&(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 max-w-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Create bookmark from selection?"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:y,disabled:m,className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:m?"Creating...":"Bookmark"}),s.jsx("button",{onClick:()=>{window.getSelection()?.removeAllRanges(),k("")},className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"Cancel"})]})]})]})]})}},6707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/magnussmari/Documents/VALOR/Review_copies/After_cognition/src/components/ChapterReader.tsx#default`)},492:(e,t,r)=>{"use strict";r.d(t,{Tc:()=>c,bR:()=>n,Uo:()=>i,If:()=>l,PD:()=>d,L$:()=>o,SC:()=>h,D$:()=>x});var s=r(2823);function a(){return(0,s.createBrowserClient)("https://axjuevxjcestqhzdgjca.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF4anVldnhqY2VzdHFoemRnamNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzODkxMzYsImV4cCI6MjA2OTk2NTEzNn0.CNIcv8_FxECkxuMcZzACFupy2IzszEZnSj9-j0dgz6U")}async function i(){let e=a(),{data:t,error:r}=await e.from("chapters").select(`
      *,
      sections:sections(count)
    `).eq("is_published",!0).order("order_index");if(r)throw r;return t}async function n(e){let t=a(),{data:r,error:s}=await t.from("chapters").select(`
      *,
      sections(*)
    `).eq("slug",e).eq("is_published",!0).single();if(s)throw s;return r}async function l(e,t){let r=a(),{data:s}=await r.from("chapters").select("id").eq("slug",e).single();if(!s)throw Error("Chapter not found");let{data:i,error:n}=await r.from("sections").select(`
      *,
      chapter:chapters(*)
    `).eq("chapter_id",s.id).eq("slug",t).eq("is_published",!0).single();if(n)throw n;return i}async function o(e){let t=a(),{data:r,error:s}=await t.from("user_progress").select(`
      *,
      section:sections(
        *,
        chapter:chapters(*)
      )
    `).eq("user_id",e).order("updated_at",{ascending:!1});if(s)throw s;return r}async function d(e){let t=a(),{data:r,error:s}=await t.from("bookmarks").select(`
      *,
      section:sections(
        *,
        chapter:chapters(*)
      )
    `).eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return r}async function c(e){let t=a(),{error:r}=await t.from("bookmarks").delete().eq("id",e);if(r)throw r}async function x(e,t){let r=a(),{data:s,error:i}=await r.from("reading_sessions").insert({user_id:e,device_type:t,user_agent:null}).select().single();if(i)throw i;return s.id}async function h(e){let t=a(),{data:r,error:s}=await t.from("user_reading_stats").select("*").eq("user_id",e).single();if(s)throw s;return r}}};